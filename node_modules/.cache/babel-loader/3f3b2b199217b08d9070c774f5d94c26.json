{"remainingRequest":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangluna/wln/vueSpace/vue-ergeng/src/views/index/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/src/views/index/list.vue","mtime":1561465952896},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport Style from \"cube-ui/src/modules/style\";\nimport Slide from \"cube-ui/src/modules/slide\";\nimport headtitle from \"../title.vue\";\nimport loading from '@/components/loading.vue';\nimport BScroll from 'better-scroll'; // Vue.use(Style,Slide)\n\nimport { constants } from 'fs';\nexport default {\n  name: \"indexlist\",\n  components: {\n    headtitle: headtitle,\n    loading: loading\n  },\n  data: function data() {\n    return {\n      videos: [],\n      headtitle: '首页视频',\n      more: null,\n      search: true,\n      isload: false,\n      page: 1,\n      size: 2,\n      count: 6,\n      items: [{\n        url: 'http://www.didichuxing.com/',\n        image: 'http://39.96.201.228:4869/44a0b7a59796c1ddbc14b87eb8b0d31c'\n      }, {\n        image: 'http://39.96.201.228:4869/83924007a32036cf933b30eb33a2ae01'\n      }, {\n        image: 'http://39.96.201.228:4869/a6b0b59f57ea3fd8a4d4d7fdab6b78b6'\n      }, {\n        image: 'http://39.96.201.228:4869/18a22e79b05ef34b3b8017fc5f6d06b7'\n      }]\n    };\n  },\n  created: function created() {\n    this.isload = true;\n    this.getList();\n  },\n  mounted: function mounted() {\n    if (this.count / this.size > this.page) {\n      this.more = true;\n    } // this.getList();\n\n  },\n  methods: {\n    // getList () {\n    //     axios\n    //     .get('https://result.eolinker.com/L6yNRgD1148c81b2e7e7c37263f70b9d7b7e296dc4db322?uri=index/list')\n    //     .then((res)=>{\n    //         this.isload = false;\n    //         let data = res.data;\n    //         this.videos = data.videoList;\n    //     })\n    //     .catch((err) => {\n    //         console.log(err)\n    //     })\n    // },\n    getList: function getList() {\n      var _this = this;\n\n      if (this.videos.length >= this.count) {\n        this.more = false;\n        return;\n      }\n\n      axios.get('http://iot.smart-ideas.com.cn/ssgy/lnVideo/list/' + this.page + '/' + this.size).then(function (res) {\n        var data = res.data;\n\n        if (data.success) {\n          var list = data.queryResult.list;\n          _this.page++;\n          _this.videos = _this.videos.concat(list);\n\n          _this.$nextTick(function () {\n            if (!_this.scroll) {\n              _this.scroll = new BScroll(_this.$refs.wrapper, {\n                click: true,\n                taps: true\n              });\n\n              _this.scroll.on('touchEnd', function (pos) {\n                // 上拉动作\n                if (_this.scroll.maxScrollY > pos.y + 40) {\n                  // console.log(\"上拉加载更多...\")\n                  _this.getList();\n\n                  _this.scroll.refresh();\n                } // console.log(this.scroll.maxScrollY+\"总距离----下拉的距离\"+pos.y)\n\n              });\n            } else {\n              _this.scroll.refresh();\n            }\n          });\n\n          _this.isload = false;\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    changepage: function changepage(current) {\n      console.log(current);\n    },\n    clickHandler: function clickHandler(item, index) {\n      console.log(item, index);\n    }\n  }\n};",{"version":3,"sources":["list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"index-page\">\n    <headtitle :title=\"headtitle\" :search=\"search\"></headtitle>\n    <div class=\"wrapper\" ref=\"wrapper\" >\n      <div class=\"content\">\n    \n    <cube-slide\n      class=\"slide-wrap\"\n      :auto-play=\"false\"\n      :data=\"items\"\n      ref=\"slide\"\n      @change=\"changepage\"\n      >\n      <cube-slide-item\n        v-for=\"(item,index) in items\"\n        :key=\"index\"\n        @click.native=\"clickHandler(item,index)\"\n      >\n        <img class=\"slide-img\" :src=\"item.image\">\n      </cube-slide-item>\n      <template slot=\"dots\" slot-scope=\"props\">\n        <span\n          class=\"my-dot\"\n          :class=\"{active: props.current === index}\"\n          v-for=\"(item,index) in props.dots\"\n          :key=\"index\"\n        >{{index+1}}</span>\n      </template>\n    </cube-slide>\n    <div class=\"list-wrap\">\n      <div class=\"list-wrap-title\">为你精选</div>  \n          <router-link\n            :to=\"{path:'/detail', query: {id:item.id}}\"\n            tag=\"div\"\n            class=\"list-box\"\n            v-for=\"(item) in videos\"\n            :key=\"item.id\"\n          >\n            <div class=\"list-img\" :style=\"{ backgroundImage: 'url(' +item.videoImageUrl+ ')'}\"></div>\n            <div class=\"list-title\">{{item.videoName}}</div>\n            <div class=\"list-desc\">{{item.videoIntroduction}}</div>\n          </router-link>\n          <div>\n              <div class=\"pullupmore\" v-if=\"more\">上拉加载更多...</div>\n              <div v-else>已经到底了...</div>\n          </div>\n         \n\n       </div>\n      \n    <loading :isload=\"isload\"></loading>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport {Style,Slide} from 'cube-ui'\nimport headtitle from '../title.vue'\nimport loading from '@/components/loading.vue'\nimport BScroll from 'better-scroll'\n// Vue.use(Style,Slide)\nimport { constants } from 'fs';\nexport default {\n  name: \"indexlist\",\n  components:{\n    headtitle,\n    loading\n  },\n  data: function(){\n      return {\n        videos:[],\n        headtitle:'首页视频',\n        more: null,\n        search: true,\n        isload: false,\n        page:1,\n        size:2,\n        count:6,\n        items:[{\n          url: 'http://www.didichuxing.com/',\n          image:'http://39.96.201.228:4869/44a0b7a59796c1ddbc14b87eb8b0d31c'\n        },{\n          image:'http://39.96.201.228:4869/83924007a32036cf933b30eb33a2ae01'\n        },{\n          image:'http://39.96.201.228:4869/a6b0b59f57ea3fd8a4d4d7fdab6b78b6'\n        },{\n          image:'http://39.96.201.228:4869/18a22e79b05ef34b3b8017fc5f6d06b7'\n        }]\n      }\n  },\n  created(){\n    this.isload = true;\n    this.getList();\n  },\n  mounted(){\n      if(this.count/this.size > this.page){\n        this.more = true;\n      }\n      // this.getList();\n  },\n  methods:{\n      // getList () {\n        //     axios\n        //     .get('https://result.eolinker.com/L6yNRgD1148c81b2e7e7c37263f70b9d7b7e296dc4db322?uri=index/list')\n        //     .then((res)=>{\n        //         this.isload = false;\n        //         let data = res.data;\n        //         this.videos = data.videoList;\n        //     })\n        //     .catch((err) => {\n        //         console.log(err)\n        //     })\n      // },\n    getList () {\n        if(this.videos.length >= this.count){\n          this.more = false;\n          return;\n        }\n        axios\n        .get('http://iot.smart-ideas.com.cn/ssgy/lnVideo/list/'+this.page+'/'+this.size)\n        .then((res)=>{\n          let data = res.data;         \n          if(data.success){\n            let list = data.queryResult.list;\n                this.page++;\n                this.videos  = this.videos.concat(list);\n                this.$nextTick(() => {\n                    if (!this.scroll) {\n                      this.scroll = new BScroll(this.$refs.wrapper, {\n                        click: true,\n                        taps: true})\n                      this.scroll.on('touchEnd', (pos) => {\n                        // 上拉动作\n                        if (this.scroll.maxScrollY>pos.y+40) {\n                          // console.log(\"上拉加载更多...\")\n                          this.getList();\n                          this.scroll.refresh()\n                        }\n                        // console.log(this.scroll.maxScrollY+\"总距离----下拉的距离\"+pos.y)\n                      })\n                    } else {\n                      this.scroll.refresh();\n                    }\n                })  \n           this.isload = false;\n          }\n        })\n        .catch((err) => {\n            console.log(err)\n        })\n    },\n    changepage(current){\n      console.log(current);\n    },\n    clickHandler(item,index){\n      console.log(item,index)\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.index-page {\n  padding-top: 40px;\n  .wrapper{ \n    position: absolute;\n    top:50px;\n    bottom: 50px;\n    left:0;\n    right:0;\n    overflow: hidden;\n    .slide-wrap {\n      width: 100%;\n      height: 150px;\n      padding-bottom: 15px;\n      overflow: hidden;\n      margin-bottom: 25px;\n      .cube-slide-item {\n        padding: 0px 15px 10px;\n        .slide-img {\n          display: block;\n          width: 100%;\n          height: auto;\n        }\n      }\n      .cube-slide-dots {\n        bottom: -10px;\n        height: 5px;\n        .my-dot {\n          width: 10px;\n          height: 2px;\n          margin-right: 10px;\n          background: #ccc;\n          &.active {\n            background: #000;\n            width: 20px;\n          }\n        }\n      }\n    }\n    .list-wrap {\n      padding: 0 15px 10px;\n      box-sizing: border-box;\n      .list-wrap-title {\n        font-size: 18px;\n        color: #000;\n        padding: 10px 0 20px;\n      }\n      .list-box {\n        position: relative;\n        background-position: 50%;\n        background-size: cover;\n        color: #fff;\n        padding-bottom: 25px;\n        cursor: pointer;\n        // height: 225px;\n        .list-img {\n          width: 100%;\n          height: 180px;\n          background-position: 50%;\n          background-size: cover;\n        }\n        .list-title {\n          padding: 15px 0px 8px;\n          color: #1a1a1a;\n          font-size: 14px;\n          font-weight: 400;\n        }\n        .list-desc {\n          line-height: 18px;\n          font-size: 12px;\n          color: #999;\n          // padding-bottom: 25px;\n          letter-spacing: 1px;\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 2; //需要控制的文本行数\n          overflow: hidden;\n          // font-weight: 300;\n          // word\n        }\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/views/index"}]}