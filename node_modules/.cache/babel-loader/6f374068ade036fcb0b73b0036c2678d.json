{"remainingRequest":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangluna/wln/vueSpace/vue-ergeng/src/views/index/comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/src/views/index/comment.vue","mtime":1561804039988},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport headtitle from \"../title.vue\";\nimport { constants } from 'fs';\nimport toast from '@/components/toast';\nexport default {\n  name: \"comment\",\n  components: {\n    headtitle: headtitle,\n    toast: toast\n  },\n  data: function data() {\n    return {\n      back: true,\n      title: '评论',\n      userInfo: '',\n      toastOptions: {},\n      param: {\n        videoId: '',\n        userId: '',\n        userNickName: '',\n        content: ''\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.param.videoId = this.$route.query.id;\n    this.getUserInfo();\n  },\n  computed: {\n    wordNum: function wordNum() {\n      return this.param.content.length;\n    }\n  },\n  methods: {\n    getUserInfo: function getUserInfo() {\n      this.userInfo = JSON.parse(this.$store.state.userinfo);\n      this.param.userId = this.userInfo.userId, this.param.userNickName = this.userInfo.userName;\n    },\n    onSaveComment: function onSaveComment() {\n      var _this = this;\n\n      if (this.param.content == '' || this.param.content.length > 30) {\n        this.showToast({\n          content: \"请输入评论内容\"\n        });\n        return;\n      }\n\n      console.log(this.param);\n      axios.put('http://iot.smart-ideas.com.cn/ssgy/lnVideo/saveComments', {\n        userId: this.param.userId,\n        videoId: this.param.videoId,\n        userNickName: this.param.userNickName,\n        content: this.param.content\n      }).then(function (res) {\n        console.log(res.data);\n\n        if (res.data.success) {\n          _this.param.content = '';\n\n          _this.showToast({\n            content: \"发布评论成功\",\n            callback: function callback() {\n              _this.$router.go(-1);\n            }\n          });\n        }\n      }).catch(function (res) {\n        console.log(res);\n      });\n    },\n    showToast: function showToast(obj) {\n      this.$refs.toast.showTips();\n      this.toastOptions = obj;\n    }\n  }\n};",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;AAWA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,SAAA;AACA,SAAA,SAAA,QAAA,IAAA;AAEA,OAAA,KAAA,MAAA,oBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA,SADA;AAEA,IAAA,KAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,IAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,YAAA,EAAA,EAJA;AAKA,MAAA,KAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,MAAA,EAAA,EAFA;AAGA,QAAA,YAAA,EAAA,EAHA;AAIA,QAAA,OAAA,EAAA;AAJA;AALA,KAAA;AAYA,GAnBA;AAoBA,EAAA,OApBA,qBAoBA;AACA,SAAA,KAAA,CAAA,OAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,EAAA;AACA,SAAA,WAAA;AACA,GAvBA;AAwBA,EAAA,QAAA,EAAA;AACA,IAAA,OAAA,EAAA,mBAAA;AACA,aAAA,KAAA,KAAA,CAAA,OAAA,CAAA,MAAA;AACA;AAHA,GAxBA;AA6BA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA;AACA,WAAA,KAAA,CAAA,MAAA,GAAA,KAAA,QAAA,CAAA,MAAA,EACA,KAAA,KAAA,CAAA,YAAA,GAAA,KAAA,QAAA,CAAA,QADA;AAEA,KALA;AAOA,IAAA,aAPA,2BAOA;AAAA;;AACA,UAAA,KAAA,KAAA,CAAA,OAAA,IAAA,EAAA,IAAA,KAAA,KAAA,CAAA,OAAA,CAAA,MAAA,GAAA,EAAA,EAAA;AACA,aAAA,SAAA,CAAA;AACA,UAAA,OAAA,EAAA;AADA,SAAA;AAGA;AACA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,KAAA;AACA,MAAA,KAAA,CACA,GADA,CACA,yDADA,EACA;AACA,QAAA,MAAA,EAAA,KAAA,KAAA,CAAA,MADA;AAEA,QAAA,OAAA,EAAA,KAAA,KAAA,CAAA,OAFA;AAGA,QAAA,YAAA,EAAA,KAAA,KAAA,CAAA,YAHA;AAIA,QAAA,OAAA,EAAA,KAAA,KAAA,CAAA;AAJA,OADA,EAOA,IAPA,CAOA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,OAAA,GAAA,EAAA;;AACA,UAAA,KAAA,CAAA,SAAA,CAAA;AACA,YAAA,OAAA,EAAA,QADA;AAEA,YAAA,QAAA,EAAA,oBAAA;AACA,cAAA,KAAA,CAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA;AAJA,WAAA;AAMA;AACA,OAlBA,EAmBA,KAnBA,CAmBA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,OArBA;AAsBA,KArCA;AAsCA,IAAA,SAtCA,qBAsCA,GAtCA,EAsCA;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,QAAA;AACA,WAAA,YAAA,GAAA,GAAA;AACA;AAzCA;AA7BA,CAAA","sourcesContent":["<template>\n  <div class=\"comment-page\">\n    <headtitle :back=\"back\" :title=\"title\"></headtitle>\n    <textarea class=\"comment-textarea\" name=\"\" id=\"\" v-model=\"param.content\" maxlength=\"30\"></textarea>\n    <div class=\"comment-count\">{{wordNum}} / 30</div>\n    <cube-button :primary=\"true\" @click=\"onSaveComment\">发布评论</cube-button>\n    <toast :toastOptions=\"toastOptions\" ref=\"toast\"></toast>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport headtitle from '../title.vue'\nimport { constants } from 'fs';\n\nimport toast from '@/components/toast'\n\nexport default {\n  name: \"comment\",\n  components:{\n    headtitle,\n    toast\n  },\n  data: function(){\n    return {\n       back:true,\n       title:'评论',\n       userInfo:'',\n       toastOptions:{},\n       param:{\n          videoId:'',\n          userId:'',\n          userNickName:'',\n          content:''\n       }\n    }\n  },\n  mounted(){\n    this.param.videoId = this.$route.query.id;\n    this.getUserInfo();\n  },\n  computed:{\n    wordNum:function(){\n        return this.param.content.length;\n    }\n  },\n  methods:{\n    getUserInfo(){\n        this.userInfo = JSON.parse(this.$store.state.userinfo);\n        this.param.userId = this.userInfo.userId,\n        this.param.userNickName = this.userInfo.userName\n    },\n\n    onSaveComment(){\n        if(this.param.content =='' || this.param.content.length>30){\n          this.showToast({\n            content: \"请输入评论内容\"\n          })\n          return;\n        }\n        console.log(this.param);\n        axios\n        .put('http://iot.smart-ideas.com.cn/ssgy/lnVideo/saveComments',{\n            userId: this.param.userId,\n            videoId: this.param.videoId,\n            userNickName: this.param.userNickName,\n            content: this.param.content\n        })\n        .then((res)=>{\n          console.log(res.data)\n            if(res.data.success){\n                this.param.content ='';\n                this.showToast({\n                    content:\"发布评论成功\",\n                    callback: ()=>{\n                      this.$router.go(-1);\n                    }\n                })\n            }\n        })\n        .catch((res)=>{\n            console.log(res);\n        })\n    },\n    showToast(obj){\n        this.$refs.toast.showTips();\n        this.toastOptions = obj;\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.comment-page {\n    padding: 50px 15px 0;\n    .comment-textarea{\n        width:100%;\n        height: 100px;\n        line-height: 20px;\n        padding:5px 15px;\n        border:1px solid #ccc;\n        box-sizing:border-box;\n        margin-bottom: 5px;\n    }\n    .comment-count{\n      text-align: right;\n      margin-bottom: 10px;\n    }\n    \n}\n</style>\n"],"sourceRoot":"src/views/index"}]}