{"remainingRequest":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/thread-loader/dist/cjs.js!/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/babel-loader/lib/index.js??ref--16-2!/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangluna/wln/vueSpace/vue-ergeng/src/views/index/detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/src/views/index/detail.vue","mtime":1561987432624},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport imgUrl from '@/assets/images/collect-icon-on.png';\nimport imgUrlOff from '@/assets/images/collect-icon-off.png';\nimport Axios from 'axios';\nimport BScroll from 'better-scroll';\nimport headtitle from \"../title.vue\";\nimport toast from '@/components/toast';\nimport { constants } from 'fs';\nimport * as apiUrl from \"@/common/apiUrl.js\";\nexport default {\n  name: \"indexdetail\",\n  components: {\n    headtitle: headtitle,\n    toast: toast\n  },\n  data: function data() {\n    return {\n      headtitle: \"详情\",\n      back: true,\n      detailInfo: '',\n      reviewList: [],\n      _dom: '',\n      controls: false,\n      isPlay: false,\n      isCollect: false,\n      imgUrl: imgUrl,\n      imgUrlOff: imgUrlOff,\n      params: {\n        videoId: '',\n        userId: ''\n      },\n      toastOptions: {}\n    };\n  },\n  created: function created() {\n    this.params.videoId = this.$route.query.id;\n    this.params.userId = this.$store.state.userinfo ? JSON.parse(this.$store.state.userinfo).userId : 'noLogin';\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.getVideoDetail();\n    this.getReview();\n    this.$nextTick(function () {\n      _this.scroll = new BScroll(_this.$refs.wrapper, {\n        bounce: {\n          top: true,\n          bottom: true,\n          left: false,\n          right: false\n        }\n      });\n    });\n  },\n  methods: {\n    getVideoDetail: function getVideoDetail() {\n      var _this2 = this;\n\n      Axios.get(apiUrl.api_test_url + 'lnVideo/findById/' + this.params.videoId + '/' + this.params.userId).then(function (res) {\n        var data = res.data;\n\n        if (data.success) {\n          _this2.detailInfo = data.video;\n\n          if (data.video.isCollecttion === 'Y') {\n            _this2.isCollect = true;\n          }\n        }\n      });\n    },\n    getReview: function getReview() {\n      var _this3 = this;\n\n      Axios.get(apiUrl.api_test_url + 'lnVideo/findCommentsByVideoId/' + this.params.videoId).then(function (res) {\n        var data = res.data;\n\n        if (data.success) {\n          _this3.reviewList = data.comments;\n        }\n      });\n    },\n    videoPlay: function videoPlay() {\n      this._dom = document.getElementById('detailVideo');\n      this.isPlay = !this.isPlay;\n      this.controls = true;\n\n      this._dom.play();\n    },\n    flagFavorite: function flagFavorite() {\n      var _this4 = this;\n\n      if (this.params.userId === 'noLogin') {\n        this.showToast({\n          content: \"您还没有登录，去登录~\",\n          callback: function callback() {\n            _this4.$router.push({\n              name: 'login'\n            });\n          }\n        });\n        return;\n      }\n\n      if (this.isCollect) {\n        Axios.delete(apiUrl.api_test_url + 'lnVideo/deleteUserVideo/' + this.params.userId + '/' + this.params.videoId).then(function (res) {\n          var data = res.data;\n\n          if (data.success) {\n            _this4.isCollect = false;\n\n            _this4.showToast({\n              content: \"以取消收藏\"\n            });\n          }\n        });\n      } else {\n        Axios.put(apiUrl.api_test_url + 'lnVideo/saveUserVideo', {\n          userId: this.params.userId,\n          videoId: this.params.videoId\n        }).then(function (res) {\n          var data = res.data;\n\n          if (data.success) {\n            _this4.isCollect = true;\n\n            _this4.showToast({\n              content: \"收藏成功\"\n            });\n          }\n        });\n      }\n    },\n    onComment: function onComment() {\n      var _this5 = this;\n\n      if (this.params.userId === 'noLogin') {\n        this.showToast({\n          content: \"您还没有登录，去登录~\",\n          callback: function callback() {\n            _this5.$router.push({\n              name: 'login',\n              query: {\n                'backComponentName': 'indexdetail',\n                'id': _this5.params.videoId\n              }\n            });\n          }\n        });\n      } else {\n        this.$router.push({\n          path: '/comment',\n          query: {\n            'id': this.params.videoId\n          }\n        });\n      }\n    },\n    showToast: function showToast(obj) {\n      this.$refs.toast.showTips();\n      this.toastOptions = obj;\n    }\n  }\n};",null]}