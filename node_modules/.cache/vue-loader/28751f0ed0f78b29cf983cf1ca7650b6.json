{"remainingRequest":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangluna/wln/vueSpace/video-geng/src/views/index/detail.vue?vue&type=style&index=0&id=24ff8648&lang=less&scoped=true&","dependencies":[{"path":"/Users/wangluna/wln/vueSpace/video-geng/src/views/index/detail.vue","mtime":1561987432624},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/less-loader/dist/cjs.js","mtime":1560777210830},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nh1, p {\n    line-height: 1.5;\n}\n.detail-wrap{   \n    padding-top:40px;\n    height: 100%;\n    .detail-video-box{\n        background: #000;\n        height: 210px;\n        overflow: hidden;\n        position: relative;\n        left: 50%;\n        -webkit-transform: translate(-50%);\n        transform: translate(-50%);\n        width: 100%;\n        video{    \n            display: inline-block;\n            *display: inline;\n            *zoom: 1;\n            height: 100%;\n            position: absolute;\n            width: 100%;\n            left: 0;\n            z-index: 1;\n        }\n        .cover{\n            height: 100%;\n            position: absolute;\n            width: 100%;\n            left: 0;\n            background-position: bottom;\n            background-repeat: no-repeat;\n            background-size: cover;\n            z-index: 2;\n        }\n        .cover.hide{ display: none;}\n        .play-btn.hide{ display: none;}\n        .play-btn{\n            height: 100%;\n            position: absolute;\n            width: 100%;\n            left: 0;\n            background-color: rgba(0,0,0,.15);\n            background-image: url(//static.kaiyanapp.com/eyepetizer-web/assets/images/detail/icon_play@2x.53ec01f2.png);\n            background-position: 50%;\n            background-repeat: no-repeat;\n            background-size: 40px 40px;\n            cursor: pointer;\n            -webkit-transition: background-color .5s;\n                    transition: background-color .5s;\n            z-index: 3;\n        }\n    }\n    .wrapper{\n        // background-image: url(\"http://img.kaiyanapp.com/4721aee1249d815abbc2834e4b8bd58a.png?imageMogr2/quality/60/format/jpg\");\n        background-color: rgba(0, 0, 0, .5);\n        width: 100%;\n        position: absolute;\n        top: 250px;\n        bottom: 40px;  /*关键*/\n        overflow: hidden;\n        z-index: 1;\n        background-size: cover;\n        .content{\n            \n            overflow: hidden;\n            .detail-video-info{\n                color:#fff;\n                .video-info-box{\n                    // background: rgba(0,0,0,.2);\n                    padding: 15px;\n                    padding-bottom: 4px;\n                    h1{\n                        font-size: 20px;\n                        margin: 0;\n                        margin-bottom: 7px;\n                    }\n                    p{\n                        margin: 0;\n                        margin-bottom: 12px;\n                    }\n                    .vedio-desc {\n                        margin-bottom: 11px;\n                        font-weight: 300;\n                        line-height: 20px;\n                    }\n                }\n                .video-review-box{\n                    // background: rgba(0,0,0,.4);\n                    padding: 0;\n                    overflow: hidden;\n                    .header{\n                        margin: 16px 0 10px;\n                        text-align: center;\n                    }\n                    .video-review-list{\n                        .review-item {\n                            font-size: 12px;\n                            padding-bottom: 15px;\n                            position: relative;\n                            .review-avatar{\n                                background-position: 50%;\n                                background-size: cover;\n                                border-radius: 50%;\n                                float: left;\n                                height: 36px;\n                                margin: 0 13px;\n                                width: 36px;\n                            }\n                            .review-info-box{\n                                margin-left: 62px;\n                                .username{   \n                                    margin: 0;\n                                    margin-bottom: 4px;\n                                }\n                                .time{\n                                    margin-bottom: 4px;\n                                    opacity: .6;\n                                }\n                                .text{\n                                    margin-bottom: 15px;\n                                    padding-right: 35px;\n                                }\n                            }\n                            .like{\n                                position: absolute;\n                                text-align: right;\n                                top: 0;\n                                right: 16px;\n                                div{\n                                    display: inline-block;\n                                }\n                                .like-icon{\n                                    background-image: url(//static.kaiyanapp.com/eyepetizer-web/assets/images/detail/icon_like_grey@3x.d2a2a2a8.png);\n                                    background-position: 50%;\n                                    background-size: cover;\n                                    height: 15px;\n                                    width: 15px;\n                                    margin-left:3px;\n                                }\n                            }\n                        }\n                        .noreview{\n                            text-align: center;\n                            padding: 15px 10px 30px;\n                            font-size: 12px; \n                            opacity: .8;\n                        }\n                    }\n                }\n                \n            }\n            \n        }\n        // .video-cover-blurred {\n            //     background-position: 50%;\n            //     background-size: 100% 100%;\n            //     height: 100%;\n            //     position: absolute;\n            //     top: 0;\n            //     -webkit-transform: rotate(180deg) scaleX(-1);\n            //             transform: rotate(180deg) scaleX(-1);\n            //     width: 100%;\n            //     z-index: -10;\n        // }\n    }\n    .detail-footer{\n        position: fixed;\n        left:0;\n        right:0;\n        bottom:0;\n        height: 40px;\n        z-index:10;\n        display: flex;\n        width:100%;\n        background: #333;\n        color: #fff;\n        // justify-items: center;\n        justify-content : space-between;\n        div{ \n            margin:0 30px;\n            line-height: 30px;\n            display: flex;\n            flex-wrap: nowrap;\n            justify-content: space-around;\n            align-items: center;\n            span{\n                line-height: 16px;\n                margin-top: 1px;\n                margin-left: 2px;\n            }\n            .collect-icon{\n                width:20px;\n                height: 20px;\n                // display: inline-block;\n                // margin-top:3px;\n            }\n        }\n\n    }\n    \n}\n",{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"detail.vue","sourceRoot":"src/views/index","sourcesContent":["<template>\n  <div class=\"detail-wrap\">\n    <headtitle :title=\"headtitle\" :back=\"back\"></headtitle>\n    <div class=\"detail-video-box\">\n        <video id=\"detailVideo\" webkit-playsinline playsinline=\"true\" preload=\"none\" :controls=\"controls\" \n        :src=\"detailInfo.videoUrl\"></video>\n        <div class=\"cover\" :class=\"{hide:isPlay}\" :style=\"{backgroundImage: 'url('+detailInfo.videoImageUrl+')'}\"></div>\n        <div class=\"play-btn\" :class=\"{hide:isPlay}\" v-on:click=\"videoPlay()\"></div>\n    </div>\n    <!-- <div class=\"wrapper\" ref=\"wrapper\" style=\"backgroundImages:url(http://img.kaiyanapp.com/595b22ce0c71d4f82a8cb88522053c75.jpeg?imageMogr2/quality/60/format/jpg)\"> -->\n    <div class=\"wrapper\" ref=\"wrapper\" :style=\"{backgroundImage:'url('+ detailInfo.videoInfoBg +')'}\">\n        <div class=\"content\">\n            <div class=\"detail-video-info\">\n                <div class=\"video-info-box\">\n                    <h1>{{detailInfo.videoName}}</h1>\n                    <p>{{detailInfo.videoPlayTime}}</p>\n                    <div class=\"vedio-desc\">{{detailInfo.videoIntroduction}}</div>\n                </div>\n                <div class=\"video-review-box\">\n                    <div class=\"header\">热门评论</div>\n                    <div class=\"video-review-list\">\n                        <div v-if=\"reviewList.length > 0\">\n                            <div class=\"review-item\"  v-for=\"item in reviewList\" :key=\"item.id\">\n                                <div class=\"review-avatar\" style=\"backgroundImage:url(http://img.kaiyanapp.com/231870dcc13e098d31bf551b07b7558f.jpeg?imageMogr2/quality/60/format/jpg)\"></div>\n                                <!-- <div class=\"review-avatar\" :style=\"{backgroundImage: 'url('+item.useravatar+')'}\"></div> -->\n                                <div class=\"review-info-box\">\n                                    <p class=\"username\">{{item.userNickName}}</p>\n                                    <p class=\"time\">{{item.createDate}}</p>\n                                    <p class=\"text\">{{item.content}}</p>\n                                </div>\n                                <div class=\"like\">\n                                    <div class=\"like-count\">{{item.star}}</div>\n                                    <div class=\"like-icon\"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <div v-else class=\"noreview\" @click=\"onComment()\">还没有评论,快去评论吧~</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- <div class=\"video-cover-blurred\" :style=\"{backgroundImage:'url('+ detailInfo.infobgurl +')'}\"></div> -->\n    </div>\n    <div class=\"detail-footer\">\n        <div @click=\"flagFavorite()\"> \n            <img class=\"collect-icon\" :src=\"isCollect? imgUrl : imgUrlOff\" alt=\"\">\n            <!-- <img class=\"collect-icon\" :src=\"'../assets/images/collect-icon-'+on+'.png'\">  -->\n            <span>收藏</span>\n        </div>\n        <div @click=\"onComment()\">去评论</div>\n    </div>\n    <toast :toastOptions=\"toastOptions\" ref=\"toast\"></toast>\n  </div>\n</template>\n\n<script>\nimport imgUrl from '@/assets/images/collect-icon-on.png'\nimport imgUrlOff from '@/assets/images/collect-icon-off.png'\n\nimport Axios from 'axios'\nimport BScroll from 'better-scroll'\nimport headtitle from '../title.vue'\nimport toast from '@/components/toast'\nimport { constants } from 'fs';\nimport * as apiUrl from \"@/common/apiUrl.js\";\n\nexport default {\n  name: \"indexdetail\",\n  components:{\n    headtitle,\n    toast\n  },\n  data: function(){\n      return {\n        headtitle:\"详情\",\n        back: true,\n        detailInfo:'',\n        reviewList: [],\n        _dom: '',\n        controls: false,\n        isPlay: false,\n        isCollect: false,\n        imgUrl,\n        imgUrlOff, \n        params:{\n            videoId:'',\n            userId:''\n        },\n        toastOptions:{}\n      }\n  },\n  created(){\n    this.params.videoId = this.$route.query.id;\n    this.params.userId = this.$store.state.userinfo ? JSON.parse(this.$store.state.userinfo).userId : 'noLogin';\n  },\n  mounted() {\n    this.getVideoDetail();\n    this.getReview();\n    this.$nextTick(() => {\n        this.scroll = new BScroll(this.$refs.wrapper, {\n            bounce: {\n                top: true,\n                bottom: true,\n                left: false,\n                right: false\n            }\n        })\n    })\n    \n  },\n  methods: {\n    getVideoDetail:function(){\n        Axios\n        .get(apiUrl.api_test_url +'lnVideo/findById/'+this.params.videoId+'/'+ this.params.userId)\n        .then((res)=>{\n            var data = res.data;\n            if(data.success){\n                this.detailInfo = data.video;\n                if(data.video.isCollecttion === 'Y'){\n                    this.isCollect = true;\n                }\n            }\n        })\n    },\n    getReview:function(){\n        Axios\n        .get(apiUrl.api_test_url+'lnVideo/findCommentsByVideoId/'+this.params.videoId)\n        .then((res)=>{\n            var data = res.data;\n            if(data.success){\n                this.reviewList = data.comments;\n            }\n        })\n    },\n    videoPlay:function(){\n        this._dom = document.getElementById('detailVideo');\n        this.isPlay = !this.isPlay;\n        this.controls = true;\n        this._dom.play();\n    },\n    flagFavorite(){\n        if(this.params.userId ==='noLogin'){\n            this.showToast({\n                content:\"您还没有登录，去登录~\",\n                callback: ()=>{\n                    this.$router.push({name: 'login'})\n                }\n            });\n            return;\n        }\n        if(this.isCollect){\n            Axios\n            .delete(apiUrl.api_test_url+'lnVideo/deleteUserVideo/'+ this.params.userId +'/'+ this.params.videoId)\n            .then((res)=>{\n                var data = res.data;\n                if(data.success){\n                    this.isCollect = false;\n                    this.showToast({\n                        content:\"以取消收藏\"\n                    });\n                }\n            })\n        }else{\n            Axios\n            .put(apiUrl.api_test_url+'lnVideo/saveUserVideo',{\n                userId: this.params.userId,\n                videoId: this.params.videoId\n            })\n            .then((res)=>{\n                var data = res.data;\n                if(data.success){\n                    this.isCollect = true;\n                    this.showToast({\n                        content:\"收藏成功\"\n                    });\n                }\n            })\n        }\n    },\n    onComment(){\n        if(this.params.userId === 'noLogin'){\n            this.showToast({\n                content:\"您还没有登录，去登录~\",\n                callback: ()=>{\n                    this.$router.push({name: 'login',query:{'backComponentName':'indexdetail','id': this.params.videoId}})\n                }\n            });\n        }else{\n            this.$router.push({path: '/comment', query:{'id': this.params.videoId}})\n        }\n        \n    },\n    showToast(obj){\n        this.$refs.toast.showTips();\n        this.toastOptions = obj;\n    },\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n    h1, p {\n        line-height: 1.5;\n    }\n    .detail-wrap{   \n        padding-top:40px;\n        height: 100%;\n        .detail-video-box{\n            background: #000;\n            height: 210px;\n            overflow: hidden;\n            position: relative;\n            left: 50%;\n            -webkit-transform: translate(-50%);\n            transform: translate(-50%);\n            width: 100%;\n            video{    \n                display: inline-block;\n                *display: inline;\n                *zoom: 1;\n                height: 100%;\n                position: absolute;\n                width: 100%;\n                left: 0;\n                z-index: 1;\n            }\n            .cover{\n                height: 100%;\n                position: absolute;\n                width: 100%;\n                left: 0;\n                background-position: bottom;\n                background-repeat: no-repeat;\n                background-size: cover;\n                z-index: 2;\n            }\n            .cover.hide{ display: none;}\n            .play-btn.hide{ display: none;}\n            .play-btn{\n                height: 100%;\n                position: absolute;\n                width: 100%;\n                left: 0;\n                background-color: rgba(0,0,0,.15);\n                background-image: url(//static.kaiyanapp.com/eyepetizer-web/assets/images/detail/icon_play@2x.53ec01f2.png);\n                background-position: 50%;\n                background-repeat: no-repeat;\n                background-size: 40px 40px;\n                cursor: pointer;\n                -webkit-transition: background-color .5s;\n                        transition: background-color .5s;\n                z-index: 3;\n            }\n        }\n        .wrapper{\n            // background-image: url(\"http://img.kaiyanapp.com/4721aee1249d815abbc2834e4b8bd58a.png?imageMogr2/quality/60/format/jpg\");\n            background-color: rgba(0, 0, 0, .5);\n            width: 100%;\n            position: absolute;\n            top: 250px;\n            bottom: 40px;  /*关键*/\n            overflow: hidden;\n            z-index: 1;\n            background-size: cover;\n            .content{\n                \n                overflow: hidden;\n                .detail-video-info{\n                    color:#fff;\n                    .video-info-box{\n                        // background: rgba(0,0,0,.2);\n                        padding: 15px;\n                        padding-bottom: 4px;\n                        h1{\n                            font-size: 20px;\n                            margin: 0;\n                            margin-bottom: 7px;\n                        }\n                        p{\n                            margin: 0;\n                            margin-bottom: 12px;\n                        }\n                        .vedio-desc {\n                            margin-bottom: 11px;\n                            font-weight: 300;\n                            line-height: 20px;\n                        }\n                    }\n                    .video-review-box{\n                        // background: rgba(0,0,0,.4);\n                        padding: 0;\n                        overflow: hidden;\n                        .header{\n                            margin: 16px 0 10px;\n                            text-align: center;\n                        }\n                        .video-review-list{\n                            .review-item {\n                                font-size: 12px;\n                                padding-bottom: 15px;\n                                position: relative;\n                                .review-avatar{\n                                    background-position: 50%;\n                                    background-size: cover;\n                                    border-radius: 50%;\n                                    float: left;\n                                    height: 36px;\n                                    margin: 0 13px;\n                                    width: 36px;\n                                }\n                                .review-info-box{\n                                    margin-left: 62px;\n                                    .username{   \n                                        margin: 0;\n                                        margin-bottom: 4px;\n                                    }\n                                    .time{\n                                        margin-bottom: 4px;\n                                        opacity: .6;\n                                    }\n                                    .text{\n                                        margin-bottom: 15px;\n                                        padding-right: 35px;\n                                    }\n                                }\n                                .like{\n                                    position: absolute;\n                                    text-align: right;\n                                    top: 0;\n                                    right: 16px;\n                                    div{\n                                        display: inline-block;\n                                    }\n                                    .like-icon{\n                                        background-image: url(//static.kaiyanapp.com/eyepetizer-web/assets/images/detail/icon_like_grey@3x.d2a2a2a8.png);\n                                        background-position: 50%;\n                                        background-size: cover;\n                                        height: 15px;\n                                        width: 15px;\n                                        margin-left:3px;\n                                    }\n                                }\n                            }\n                            .noreview{\n                                text-align: center;\n                                padding: 15px 10px 30px;\n                                font-size: 12px; \n                                opacity: .8;\n                            }\n                        }\n                    }\n                    \n                }\n                \n            }\n            // .video-cover-blurred {\n                //     background-position: 50%;\n                //     background-size: 100% 100%;\n                //     height: 100%;\n                //     position: absolute;\n                //     top: 0;\n                //     -webkit-transform: rotate(180deg) scaleX(-1);\n                //             transform: rotate(180deg) scaleX(-1);\n                //     width: 100%;\n                //     z-index: -10;\n            // }\n        }\n        .detail-footer{\n            position: fixed;\n            left:0;\n            right:0;\n            bottom:0;\n            height: 40px;\n            z-index:10;\n            display: flex;\n            width:100%;\n            background: #333;\n            color: #fff;\n            // justify-items: center;\n            justify-content : space-between;\n            div{ \n                margin:0 30px;\n                line-height: 30px;\n                display: flex;\n                flex-wrap: nowrap;\n                justify-content: space-around;\n                align-items: center;\n                span{\n                    line-height: 16px;\n                    margin-top: 1px;\n                    margin-left: 2px;\n                }\n                .collect-icon{\n                    width:20px;\n                    height: 20px;\n                    // display: inline-block;\n                    // margin-top:3px;\n                }\n            }\n\n        }\n        \n    }\n</style>\n"]}]}