{"remainingRequest":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangluna/wln/vueSpace/video-geng/src/views/mine/outlogin.vue?vue&type=style&index=0&id=d4faa026&lang=less&scoped=true&","dependencies":[{"path":"/Users/wangluna/wln/vueSpace/video-geng/src/views/mine/outlogin.vue","mtime":1561804827338},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/less-loader/dist/cjs.js","mtime":1560777210830},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.login-page{\n    padding: 50px 15px 0;\n    .login-box{\n        padding-top:30px;\n        padding-bottom: 40px;\n        .addressinput{ \n            padding: 10px 0;\n            height:40px;\n            line-height: 40px;\n            border-bottom: 1px solid #eee;\n        }\n        .outlogin-item{\n            display: flex;\n            justify-content : space-between;\n            align-items: center;\n            border-bottom: 1px solid #eee;\n            height:40px;\n            line-height: 40px;\n            padding:10px 0px;\n            span{\n                color:#616161;\n            }\n            .useravater{\n                width:40px;\n                height:40px;\n                border-radius: 50%;\n            }\n            .outlogin-input{\n                height: 40px;\n                line-height: 40px;\n                text-align: right;\n                border:none;\n                color:#999;\n                &:focus{\n                    border: none;\n                }\n            }\n        }\n    }\n}\n",{"version":3,"sources":["outlogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"outlogin.vue","sourceRoot":"src/views/mine","sourcesContent":["<template>\n<div class=\"login-page\">\n    <headtitle :title=\"title\" :back=\"back\"></headtitle>\n    <div class=\"login-box\">\n       <div class=\"outlogin-item\">\n           <span>江湖样貌</span>\n           <img class=\"useravater\" :src=\"userinfo.userImageUrl\" alt=\"\">\n       </div>\n       <div class=\"outlogin-item\">\n           <span>昵称</span>\n           <input class=\"outlogin-input\" type=\"text\" v-model=\"userinfo.userName\" placeholder=\"请填写昵称\" >\n       </div>\n       <wv-cell class=\"addressinput\" title=\"地址\" is-link :value=\"address | pickerValueFilter\" @click.native=\"addressPickerShow = true\" />\n       <wv-picker\n        :visible.sync=\"addressPickerShow\"\n        v-model=\"address\"\n        ref=\"addressPicker\"\n        :columns=\"addressColumns\"\n        :visible-item-count=\"5\"\n        @change=\"onAddressChange\"\n        @confirm=\"confirmAddress\"\n        />\n    </div>\n    <!-- <cube-button :primary=\"true\" @click=\"userLogin()\">登录</cube-button><br> -->\n    <cube-button :primary=\"true\" @click=\"outlogin()\">退出登录</cube-button>\n</div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport headtitle from '@/views/title.vue'\nimport { constants } from 'fs';\nimport chinaAreaData from 'china-area-data'\nconst provinces = Object.values(chinaAreaData[86])\n// 获取某一省下的市\nconst getCities = (province) => {\n  let provinceCode\n  for (let i in chinaAreaData[86]) {\n    if (province === chinaAreaData[86][i]) {\n      provinceCode = i\n      break\n    }\n  }\n  return typeof chinaAreaData[provinceCode] === 'object' ? Object.values(chinaAreaData[provinceCode]) : []\n}\n// 获取某一市下的区/县\nfunction getAreas (province, city) {\n  let provinceCode, cityCode\n  for (let i in chinaAreaData[86]) {\n    if (province === chinaAreaData[86][i]) {\n      provinceCode = i\n      break\n    }\n  }\n  for (let i in chinaAreaData[provinceCode]) {\n    if (city === chinaAreaData[provinceCode][i]) {\n      cityCode = i\n      break\n    }\n  }\n  if (chinaAreaData[cityCode]) {\n    return typeof chinaAreaData[cityCode] === 'object' ? Object.values(chinaAreaData[cityCode]) : []\n  } else {\n    // 只有两级的情况\n    return []\n  }\n}\nexport default {\n  name: \"outlogin\",\n  props:{\n\n  },\n  components:{\n    headtitle\n  },\n  data: function(){\n      return {\n        title:'个人信息',\n        back:true,\n        userinfo:'',\n        addressPickerShow: false,\n        address: [],\n        addressColumns: [\n            { values: provinces},\n            { values: getCities('北京')},\n            { values: getAreas('北京', '城区')}\n        ]\n    }\n  },\n  mounted(){\n      this.getUserInfo();\n      this.$nextTick(() => {\n        this.$refs.addressPicker.setValues(['北京市', '市辖区', '昌平区'])\n      })\n  },\n  methods:{\n    getUserInfo:function(){\n       this.userinfo = JSON.parse(this.$store.state.userinfo) || '';\n    },\n    onAddressChange (picker, addressValues, slotIndex) {\n      if (slotIndex === 0) {\n        const cities = getCities(addressValues[0])\n        picker.setColumnValues(1, cities)\n        picker.setColumnValues(2, getAreas(addressValues[0], cities[0]))\n      } else if (slotIndex === 1) {\n        picker.setColumnValues(2, getAreas(addressValues[0], addressValues[1]))\n      }\n    },\n    confirmAddress (picker) {\n      this.address = picker.getValues()\n    },\n    outlogin () {\n        // sessionStorage\n          sessionStorage.removeItem('token');\n          sessionStorage.removeItem('userinfo');\n          this.$store.commit('set_token', null);\n          this.$store.commit('set_userinfo', null);\n          this.$store.commit('set_navname', 'index');\n          console.log('成功退出登录...');\n          //调到首页\n          this.$router.push('/');\n    }\n    \n  },\n  filters: {\n    pickerValueFilter (val) {\n        if (Array.isArray(val)) {\n            return val.toString()\n        } else {\n            return '请选择'\n        }\n    }\n  }\n\n};\n</script>\n<style lang=\"less\" scoped>\n    .login-page{\n        padding: 50px 15px 0;\n        .login-box{\n            padding-top:30px;\n            padding-bottom: 40px;\n            .addressinput{ \n                padding: 10px 0;\n                height:40px;\n                line-height: 40px;\n                border-bottom: 1px solid #eee;\n            }\n            .outlogin-item{\n                display: flex;\n                justify-content : space-between;\n                align-items: center;\n                border-bottom: 1px solid #eee;\n                height:40px;\n                line-height: 40px;\n                padding:10px 0px;\n                span{\n                    color:#616161;\n                }\n                .useravater{\n                    width:40px;\n                    height:40px;\n                    border-radius: 50%;\n                }\n                .outlogin-input{\n                    height: 40px;\n                    line-height: 40px;\n                    text-align: right;\n                    border:none;\n                    color:#999;\n                    &:focus{\n                        border: none;\n                    }\n                }\n            }\n        }\n    }\n</style>"]}]}