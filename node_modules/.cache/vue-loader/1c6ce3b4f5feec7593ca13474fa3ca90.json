{"remainingRequest":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangluna/wln/vueSpace/vue-ergeng/src/views/mine/mycollect.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/src/views/mine/mycollect.vue","mtime":1561991588111},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios'\nimport headtitle from '../title.vue'\nimport loadmore from '@/components/loadmore.vue'\nimport scroll from '@/components/scroll.vue'\nimport BScroll from 'better-scroll'\nimport { constants } from 'fs';\nimport * as apiUrl from \"@/common/apiUrl.js\";\nexport default {\n  name: \"mycollect\",\n  components:{\n    headtitle,\n    loadmore, \n    scroll\n  },\n  data: function(){\n      return {\n        title:'收藏列表',\n        back: true,\n        queryResult: [],\n        showMore: true,\n        total: 0,\n        params:{\n            page:1,\n            size:6,\n            userId:''\n        },\n      }\n  },\n  mounted(){\n      this.params.userId = JSON.parse(this.$store.state.userinfo).userId;\n      this.scrollToEnd();\n  },\n  methods:{\n    scrollToEnd(){\n        if( this.queryResult.length >= this.total && this.total !=0){\n            this.showMore = false;\n            return;\n        }\n        axios\n        .get(apiUrl.api_test_url + 'lnVideo/listUserVideo/' + this.params.page+'/'+this.params.size,{\n            params: {\n                userId: this.params.userId \n            } \n        })\n        .then((res)=>{\n            var data = res.data;\n            if(data.success){\n                this.total = data.queryResult.total;\n                if(this.total <= this.params.size *this.params.page ){\n                    this.showMore = false;\n                }\n                this.params.page ++ ;\n                let list = data.queryResult.list;\n                this.queryResult = this.queryResult.concat(list);  \n\n            }\n        })\n    },\n    getList () {\n        axios\n        .get('http://iot.smart-ideas.com.cn/ssgy/lnVideo/listUserVideo/'+this.param.page+'/'+this.param.size,{\n            params: {\n                userId: this.params.userId \n            }\n        })\n        .then((res)=>{\n            this.isload = false;\n            var data = res.data;\n            if(data.success){\n                this.queryResult = data.queryResult.list;\n                console.log(this.queryResult)\n            }\n        })\n        .catch((err) => {\n            console.log(err)\n        })\n    },\n  }\n};\n",null]}