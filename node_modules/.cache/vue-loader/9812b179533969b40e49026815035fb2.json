{"remainingRequest":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangluna/wln/vueSpace/video-geng/src/views/mine/mycollect.vue?vue&type=style&index=0&id=83974a48&lang=less&scoped=true&","dependencies":[{"path":"/Users/wangluna/wln/vueSpace/video-geng/src/views/mine/mycollect.vue","mtime":1561991588111},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/less-loader/dist/cjs.js","mtime":1560777210830},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.collect-page {\n    padding: 50px 15px 10px;\n    /*通过fixed固定mescroll的高度*/\n    .scroll {\n        position: fixed;\n        top: 44px;\n        bottom: 10px;\n        height: auto;\n    \n        .collect-item{\n            padding: 15px 0;\n            display: flex;\n            .collect-img-box{\n                width: 120px;\n                height: 100px;\n                overflow: hidden;\n                position: relative;\n                .collect-img{\n                    position: relative;\n                    top:50%;\n                    left:50%;\n                    transform: translate(-50%,-50%);\n                    transform-origin:50% 50%;\n                    display: block;\n                    width: auto;\n                    height: 100px;\n                }\n            }\n            .collect-info{\n                margin-left:15px;\n                flex: 1;\n                .collect-name{\n                    height: 48px;\n                    line-height: 24px;\n                    overflow: hidden;\n                    font-size: 16px;\n                    margin-bottom: 4px;\n                }\n            }\n            \n        }\n    }\n}\n",{"version":3,"sources":["mycollect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"mycollect.vue","sourceRoot":"src/views/mine","sourcesContent":["<template>\n  <div class=\"collect-page\">\n      <headtitle :title=\"title\" :back=\"true\"></headtitle>\n\t\t<scroll class=\"scroll\" ref=\"scroll\"  \n            :listenScroll=\"false\"\n            :pullup=\"true\"\n            :data=\"queryResult\"\n            @scrollToEnd=\"scrollToEnd\">\n\t\t\t<!--内容...-->\n            <div>   \n                <router-link class=\"collect-item\" :to=\"{path:'/detail', query: {id:item.id}}\" tag=\"div\" v-for=\"item in queryResult\" :key=\"item.id\">\n                    <div class=\"collect-img-box\">\n                        <img class=\"collect-img\" :src=\"item.videoImageUrl\" alt=\"\">\n                    </div>\n                    <div class=\"collect-info\">\n                        <div class=\"collect-name\">{{item.videoName}}</div>\n                        <div>{{item.videoPlayTime}}</div>\n                    </div>\n                </router-link>\n                <loadmore v-show=\"showMore\"></loadmore>\n                <div v-show=\"!queryResult.length && !this.showMore\">暂无收藏</div>\n            </div>\n\t\t</scroll>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport headtitle from '../title.vue'\nimport loadmore from '@/components/loadmore.vue'\nimport scroll from '@/components/scroll.vue'\nimport BScroll from 'better-scroll'\nimport { constants } from 'fs';\nimport * as apiUrl from \"@/common/apiUrl.js\";\nexport default {\n  name: \"mycollect\",\n  components:{\n    headtitle,\n    loadmore, \n    scroll\n  },\n  data: function(){\n      return {\n        title:'收藏列表',\n        back: true,\n        queryResult: [],\n        showMore: true,\n        total: 0,\n        params:{\n            page:1,\n            size:6,\n            userId:''\n        },\n      }\n  },\n  mounted(){\n      this.params.userId = JSON.parse(this.$store.state.userinfo).userId;\n      this.scrollToEnd();\n  },\n  methods:{\n    scrollToEnd(){\n        if( this.queryResult.length >= this.total && this.total !=0){\n            this.showMore = false;\n            return;\n        }\n        axios\n        .get(apiUrl.api_test_url + 'lnVideo/listUserVideo/' + this.params.page+'/'+this.params.size,{\n            params: {\n                userId: this.params.userId \n            } \n        })\n        .then((res)=>{\n            var data = res.data;\n            if(data.success){\n                this.total = data.queryResult.total;\n                if(this.total <= this.params.size *this.params.page ){\n                    this.showMore = false;\n                }\n                this.params.page ++ ;\n                let list = data.queryResult.list;\n                this.queryResult = this.queryResult.concat(list);  \n\n            }\n        })\n    },\n    getList () {\n        axios\n        .get('http://iot.smart-ideas.com.cn/ssgy/lnVideo/listUserVideo/'+this.param.page+'/'+this.param.size,{\n            params: {\n                userId: this.params.userId \n            }\n        })\n        .then((res)=>{\n            this.isload = false;\n            var data = res.data;\n            if(data.success){\n                this.queryResult = data.queryResult.list;\n                console.log(this.queryResult)\n            }\n        })\n        .catch((err) => {\n            console.log(err)\n        })\n    },\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.collect-page {\n    padding: 50px 15px 10px;\n    /*通过fixed固定mescroll的高度*/\n    .scroll {\n        position: fixed;\n        top: 44px;\n        bottom: 10px;\n        height: auto;\n    \n        .collect-item{\n            padding: 15px 0;\n            display: flex;\n            .collect-img-box{\n                width: 120px;\n                height: 100px;\n                overflow: hidden;\n                position: relative;\n                .collect-img{\n                    position: relative;\n                    top:50%;\n                    left:50%;\n                    transform: translate(-50%,-50%);\n                    transform-origin:50% 50%;\n                    display: block;\n                    width: auto;\n                    height: 100px;\n                }\n            }\n            .collect-info{\n                margin-left:15px;\n                flex: 1;\n                .collect-name{\n                    height: 48px;\n                    line-height: 24px;\n                    overflow: hidden;\n                    font-size: 16px;\n                    margin-bottom: 4px;\n                }\n            }\n            \n        }\n    }\n}\n</style>\n"]}]}