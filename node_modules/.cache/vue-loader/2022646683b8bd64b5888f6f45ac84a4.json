{"remainingRequest":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangluna/wln/vueSpace/video-geng/src/views/index/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangluna/wln/vueSpace/video-geng/src/views/index/list.vue","mtime":1562752071301},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/video-geng/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios'\nimport BScroll from 'better-scroll'\nimport { constants } from 'fs';\n\nimport headtitle from '../title.vue'\nimport loading from '@/components/loading.vue'\nimport loadmore from '@/components/loadmore.vue'\nimport scroll from '@/components/scroll.vue'\nimport headnav from '@/views/headnav.vue'\n\nimport * as apiUrl from \"@/common/apiUrl.js\";\n// import http from \"@/common/http.js\";\nexport default {\n  name: \"index\",\n  components:{\n    headtitle,\n    loading,\n    loadmore,\n    scroll,\n    headnav\n  },\n  data: function(){\n      return {\n        videos:[],\n        headtitle:'首页视频',\n        more: null,\n        search: true,\n        isload: false,\n        hasMore: true,\n        page:1,\n        size:4,\n        count:20,\n        items:[\n          {\n            url: 'http://www.didichuxing.com/',\n            image:'http://39.96.201.228:4869/44a0b7a59796c1ddbc14b87eb8b0d31c'\n          },{\n            image:'http://39.96.201.228:4869/83924007a32036cf933b30eb33a2ae01'\n          },{\n            image:'http://39.96.201.228:4869/a6b0b59f57ea3fd8a4d4d7fdab6b78b6'\n          },{\n          image:'http://39.96.201.228:4869/18a22e79b05ef34b3b8017fc5f6d06b7'\n          }\n        ]\n      }\n  },\n  created(){\n    this.isload = true;\n    this.scrollToEnd();\n  },\n  mounted(){\n    var map = new BMap.Map(\"allmap\");\n    var point = new BMap.Point(116.331398,39.897445);\n    map.centerAndZoom(point,12);\n\n    var geolocation = new BMap.Geolocation();\n    geolocation.getCurrentPosition(function(r){\n      if(this.getStatus() == BMAP_STATUS_SUCCESS){\n        var mk = new BMap.Marker(r.point);\n        map.addOverlay(mk);\n        map.panTo(r.point);\n        alert('您的位置：'+r.point.lng+','+r.point.lat);\n      }\n      else {\n        alert('failed'+this.getStatus());\n      }        \n    });\n  },\n  methods:{\n    scrollToEnd(){\n        if(this.videos.length >= this.count){\n          this.hasMore = false;\n          return;\n        }\n        axios\n        .get(apiUrl.api_test_url+'lnVideo/list/'+this.page+'/'+this.size)\n        .then((res)=>{\n          let data = res.data;         \n          if(data.success){\n            let list = data.queryResult.list;\n                this.page++;\n                this.videos = this.videos.concat(list);    \n          }\n          this.isload = false;\n        })\n        .catch((err) => {\n            console.log(err)\n        })\n    },\n    changepage(current){\n      console.log(current);\n    },\n    clickHandler(item,index){\n      console.log(item,index)\n    }\n  }\n};\n",{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/index","sourcesContent":["<template>\n  <div class=\"index-page\">\n    <headtitle :title=\"headtitle\" :search=\"search\"></headtitle>\n    <!-- <keep-alive>\n      <component :is=\"scroll\"></component>\n    </keep-alive> -->\n    <scroll class=\"wrapper\" ref=\"wrapper\"\n      :listenScroll=\"false\"\n      :pullup=\"true\"\n      :data=\"videos\"\n      @scrollToEnd=\"scrollToEnd\"              \n      >\n      <div>\n        <cube-slide\n          class=\"slide-wrap\"\n          :auto-play=\"false\"\n          :data=\"items\"\n          ref=\"slide\"\n          @change=\"changepage\"\n          >\n          <cube-slide-item\n            v-for=\"(item,index) in items\"\n            :key=\"index\"\n            @click.native=\"clickHandler(item,index)\"\n          >\n            <img class=\"slide-img\" :src=\"item.image\">\n          </cube-slide-item>\n          <template slot=\"dots\" slot-scope=\"props\">\n            <span\n              class=\"my-dot\"\n              :class=\"{active: props.current === index}\"\n              v-for=\"(item,index) in props.dots\"\n              :key=\"index\"\n            >{{index+1}}</span>\n          </template>\n        </cube-slide>\n        <div class=\"list-wrap\">\n              <div class=\"list-wrap-title\">为你精选</div>  \n              <router-link\n                :to=\"{path:'/detail', query: {id:item.id}}\"\n                tag=\"div\"\n                class=\"list-box\"\n                v-for=\"(item) in videos\"\n                :key=\"item.id\"\n              >\n                <div class=\"list-img\" :style=\"{ backgroundImage: 'url(' +item.videoImageUrl+ ')'}\"></div>\n                <div class=\"list-title\">{{item.videoName}}</div>\n                <div class=\"list-desc\">{{item.videoIntroduction}}</div>\n              </router-link>\n              <loadmore v-show=\"hasMore\"></loadmore>\n              <div class=\"no-result-wrapper\" v-show=\"!hasMore && !videos.length\">\n                <div title=\"抱歉，暂无内容\"></div>\n              </div>\n        </div>  \n        <loading :isload=\"isload\"></loading>\n      </div>\n    </scroll>\n    <headnav></headnav>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport BScroll from 'better-scroll'\nimport { constants } from 'fs';\n\nimport headtitle from '../title.vue'\nimport loading from '@/components/loading.vue'\nimport loadmore from '@/components/loadmore.vue'\nimport scroll from '@/components/scroll.vue'\nimport headnav from '@/views/headnav.vue'\n\nimport * as apiUrl from \"@/common/apiUrl.js\";\n// import http from \"@/common/http.js\";\nexport default {\n  name: \"index\",\n  components:{\n    headtitle,\n    loading,\n    loadmore,\n    scroll,\n    headnav\n  },\n  data: function(){\n      return {\n        videos:[],\n        headtitle:'首页视频',\n        more: null,\n        search: true,\n        isload: false,\n        hasMore: true,\n        page:1,\n        size:4,\n        count:20,\n        items:[\n          {\n            url: 'http://www.didichuxing.com/',\n            image:'http://39.96.201.228:4869/44a0b7a59796c1ddbc14b87eb8b0d31c'\n          },{\n            image:'http://39.96.201.228:4869/83924007a32036cf933b30eb33a2ae01'\n          },{\n            image:'http://39.96.201.228:4869/a6b0b59f57ea3fd8a4d4d7fdab6b78b6'\n          },{\n          image:'http://39.96.201.228:4869/18a22e79b05ef34b3b8017fc5f6d06b7'\n          }\n        ]\n      }\n  },\n  created(){\n    this.isload = true;\n    this.scrollToEnd();\n  },\n  mounted(){\n    var map = new BMap.Map(\"allmap\");\n    var point = new BMap.Point(116.331398,39.897445);\n    map.centerAndZoom(point,12);\n\n    var geolocation = new BMap.Geolocation();\n    geolocation.getCurrentPosition(function(r){\n      if(this.getStatus() == BMAP_STATUS_SUCCESS){\n        var mk = new BMap.Marker(r.point);\n        map.addOverlay(mk);\n        map.panTo(r.point);\n        alert('您的位置：'+r.point.lng+','+r.point.lat);\n      }\n      else {\n        alert('failed'+this.getStatus());\n      }        \n    });\n  },\n  methods:{\n    scrollToEnd(){\n        if(this.videos.length >= this.count){\n          this.hasMore = false;\n          return;\n        }\n        axios\n        .get(apiUrl.api_test_url+'lnVideo/list/'+this.page+'/'+this.size)\n        .then((res)=>{\n          let data = res.data;         \n          if(data.success){\n            let list = data.queryResult.list;\n                this.page++;\n                this.videos = this.videos.concat(list);    \n          }\n          this.isload = false;\n        })\n        .catch((err) => {\n            console.log(err)\n        })\n    },\n    changepage(current){\n      console.log(current);\n    },\n    clickHandler(item,index){\n      console.log(item,index)\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.index-page {\n  padding-top: 40px;\n  .wrapper{ \n    position: absolute;\n    top:50px;\n    bottom: 50px;\n    left:0;\n    right:0;\n    overflow: hidden;\n    .slide-wrap {\n      width: 100%;\n      height: 150px;\n      padding-bottom: 15px;\n      overflow: hidden;\n      margin-bottom: 25px;\n      .cube-slide-item {\n        padding: 0px 15px 10px;\n        .slide-img {\n          display: block;\n          width: 100%;\n          height: auto;\n        }\n      }\n      .cube-slide-dots {\n        bottom: -10px;\n        height: 5px;\n        .my-dot {\n          width: 10px;\n          height: 2px;\n          margin-right: 10px;\n          background: #ccc;\n          &.active {\n            background: #000;\n            width: 20px;\n          }\n        }\n      }\n    }\n    .list-wrap {\n      padding: 0 15px 10px;\n      box-sizing: border-box;\n      .list-wrap-title {\n        font-size: 18px;\n        color: #000;\n        padding: 10px 0 20px;\n      }\n      .list-box {\n        position: relative;\n        background-position: 50%;\n        background-size: cover;\n        color: #fff;\n        padding-bottom: 25px;\n        cursor: pointer;\n        // height: 225px;\n        .list-img {\n          width: 100%;\n          height: 180px;\n          background-position: 50%;\n          background-size: cover;\n        }\n        .list-title {\n          padding: 15px 0px 8px;\n          color: #1a1a1a;\n          font-size: 14px;\n          font-weight: 400;\n        }\n        .list-desc {\n          line-height: 18px;\n          font-size: 12px;\n          color: #999;\n          // padding-bottom: 25px;\n          letter-spacing: 1px;\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 2; //需要控制的文本行数\n          overflow: hidden;\n          height: 36px;\n          // font-weight: 300;\n          // word\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}