{"remainingRequest":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangluna/wln/vueSpace/vue-ergeng/src/views/index/comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/src/views/index/comment.vue","mtime":1561987689136},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangluna/wln/vueSpace/vue-ergeng/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios'\nimport headtitle from '../title.vue'\nimport toast from '@/components/toast'\nimport { constants } from 'fs';\nimport * as apiUrl from \"@/common/apiUrl.js\";\n\nexport default {\n  name: \"comment\",\n  components:{\n    headtitle,\n    toast\n  },\n  data: function(){\n    return {\n       back:true,\n       title:'评论',\n       userInfo:'',\n       toastOptions:{},\n       param:{\n          videoId:'',\n          userId:'',\n          userNickName:'',\n          content:''\n       }\n    }\n  },\n  mounted(){\n    this.param.videoId = this.$route.query.id;\n    this.getUserInfo();\n  },\n  computed:{\n    wordNum:function(){\n        return this.param.content.length;\n    }\n  },\n  methods:{\n    getUserInfo(){\n        this.userInfo = JSON.parse(this.$store.state.userinfo);\n        this.param.userId = this.userInfo.userId,\n        this.param.userNickName = this.userInfo.userName\n    },\n\n    onSaveComment(){\n        if(this.param.content =='' || this.param.content.length>30){\n          this.showToast({\n            content: \"请输入评论内容\"\n          })\n          return;\n        }\n        console.log(this.param);\n        axios\n        .put(apiUrl.api_test_url+'lnVideo/saveComments',{\n            userId: this.param.userId,\n            videoId: this.param.videoId,\n            userNickName: this.param.userNickName,\n            content: this.param.content\n        })\n        .then((res)=>{\n            if(res.data.success){\n                this.showToast({\n                    content:\"发布评论成功\",\n                    callback: ()=>{\n                      this.$router.go(-1);\n                    }\n                })\n                this.param.content ='';\n            }\n        })\n        .catch((res)=>{\n            console.log(res);\n        })\n    },\n    showToast(obj){\n        this.$refs.toast.showTips();\n        this.toastOptions = obj;\n    }\n  }\n};\n",null]}